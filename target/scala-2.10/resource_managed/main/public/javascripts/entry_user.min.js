$(function(){function set_school_list(division_id,prefecture_id){$("#school_list").set_default_list();$("#school_department_list").set_default_list();$("#school_subject_list").set_default_list();$.ajax({type:"POST",url:"/schools/"+division_id+"/"+prefecture_id,contentType:"application/json",dataType:"json",data:JSON.stringify({}),success:function(data){if(data)$.each(data,function(i,val){$("#school_list").append($("\x3coption\x3e").attr({value:val["id"]}).text(val["name"]))})}})}if($("#foreign_school_flg").val()==
"true"){$("#default_school_part").hide();$("#foreign_school_part").show()}else{$("#default_school_part").show();$("#foreign_school_part").hide()}$("#postcode_search").click(function(){var uppercode=$("#postalcode_uppercode").val();var lowercode=$("#postalcode_lowercode").val();$.ajax({type:"POST",url:"/postcode/"+uppercode+"/"+lowercode,contentType:"application/json",dataType:"json",data:JSON.stringify({}),success:function(data){if(data){$("#prefecture_id").val(data["prefectures"]["id"]);$("#domestic_place_name").val(data["placeName"]);
$("#code_number_error_part").hide()}},error:function(){$("#code_number_error_part").show()}});return true});$("#division_id").change(function(){var division_id=$("input[name\x3d'division']:checked").val();var prefecture_id=$("#school_prefecture_id").val();$.ajax({type:"POST",url:"/division/"+division_id,contentType:"application/json",dataType:"json",data:JSON.stringify({}),success:function(data){if(data){$("#default_school_part").hide();$("#foreign_school_part").show()}else{$("#default_school_part").show();
$("#foreign_school_part").hide();if(prefecture_id)set_school_list(division_id,prefecture_id)}}});return true});$("#school_prefecture_id").change(function(){var division_id=$("input[name\x3d'division']:checked").val();var prefecture_id=$(this).val();if(division_id==null)return;set_school_list(division_id,prefecture_id);return true});$("#school_list").change(function(){var school_id=$(this).val();$("#school_department_list").set_default_list();$("#school_subject_list").set_default_list();$.ajax({type:"POST",
url:"/departments/"+school_id,contentType:"application/json",dataType:"json",data:JSON.stringify({}),success:function(data){if(data)$.each(data,function(i,val){$("#school_department_list").append($("\x3coption\x3e").attr({value:val["id"]}).text(val["department"]))})}});return true});$("#school_department_list").change(function(){var department_id=$(this).val();$("#school_subject_list").set_default_list();$.ajax({type:"POST",url:"/subjects/"+department_id,contentType:"application/json",dataType:"json",
data:JSON.stringify({}),success:function(data){if(data)$.each(data,function(i,val){$("#school_subject_list").append($("\x3coption\x3e").attr({value:val["id"]}).text(val["subject"]))})}});return true});$.extend($.fn,{set_default_list:function(){$(this).children().remove();$(this).append($("\x3coption\x3e").attr({value:""}).text("-"))}})});